<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浮生六记 | **MongoDB 数据库，对象，集合**</title>
    <meta name="description" content="Just playing around">
    <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/24.styles.fe2c85d3.css" as="style"><link rel="preload" href="/assets/js/app.30461cdf.js" as="script"><link rel="preload" href="/assets/js/4.627e96b5.js" as="script"><link rel="prefetch" href="/assets/js/12.cc1b21fd.js"><link rel="prefetch" href="/assets/js/0.01165e77.js"><link rel="prefetch" href="/assets/js/1.ab7ff7e4.js"><link rel="prefetch" href="/assets/js/2.2e9a2c6e.js"><link rel="prefetch" href="/assets/js/3.868041e5.js"><link rel="prefetch" href="/assets/js/5.ac7555dd.js"><link rel="prefetch" href="/assets/js/6.831fe20d.js"><link rel="prefetch" href="/assets/js/7.2958aa67.js"><link rel="prefetch" href="/assets/js/8.40d7211d.js"><link rel="prefetch" href="/assets/js/9.8fae06a8.js"><link rel="prefetch" href="/assets/js/10.fc82ce8a.js"><link rel="prefetch" href="/assets/js/11.0dfe841b.js"><link rel="prefetch" href="/assets/js/13.26d3ea56.js"><link rel="prefetch" href="/assets/js/14.aabf7231.js"><link rel="prefetch" href="/assets/js/15.fc6c5f4e.js"><link rel="prefetch" href="/assets/js/16.095a5454.js"><link rel="prefetch" href="/assets/js/17.e814a0d2.js"><link rel="prefetch" href="/assets/js/18.d7e49a94.js"><link rel="prefetch" href="/assets/js/19.2d14bc1b.js"><link rel="prefetch" href="/assets/js/20.45dfe896.js"><link rel="prefetch" href="/assets/js/21.397de84d.js"><link rel="prefetch" href="/assets/js/22.2690f6c3.js"><link rel="prefetch" href="/assets/js/23.2a168d4d.js">
    <link rel="stylesheet" href="/assets/css/24.styles.fe2c85d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      浮生六记
    </span></a><div class="links"><!----><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/markdown.html" class="nav-link">markdown</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link">External</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/markdown.html" class="nav-link">markdown</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link">External</a></div><!----></nav><!----></div><div class="page"><div class="content"><h1 id="mongodb-数据库，对象，集合"><a href="#mongodb-数据库，对象，集合" aria-hidden="true" class="header-anchor">#</a><strong>MongoDB 数据库，对象，集合</strong></h1><h2 id="描述"><a href="#描述" aria-hidden="true" class="header-anchor">#</a><strong>描述</strong></h2><p>不管我们学习什么数据库都应该学习其中的基础概念，在mongodb中基本的概念是文档、集合、数据库，下面我们挨个介绍。</p><h2 id="数据库"><a href="#数据库" aria-hidden="true" class="header-anchor">#</a><strong>数据库</strong></h2><p>一个mongodb中可以建立多个数据库。</p><p>MongoDB的默认数据库为&quot;db&quot;，该数据库存储在data目录中。</p><p>&quot;show dbs&quot; 命令可以显示所有数据的列表。</p><pre class="language-text"><code>&gt;show dbs;
admin      0.0.78GB
jinbadata  0.0.78GB
local      0.0.78GB
</code></pre><p>执行 &quot;db&quot; 命令可以显示当前数据库对象或者集合。</p><pre class="language-text"><code>db;
test
</code></pre><p>运行&quot;use&quot;命令，可以连接到一个指定的数据库。</p><pre class="language-text"><code>use jinbadata;
switched to db jinbadata
</code></pre><p>以上实例命令中，&quot;jinbadata&quot; 是你要检索的数据库。</p><p>在下一个章节我们将详细讲解MongoDB中命令的使用。</p><p>数据库名称可以是任何字符，但是不能包含空字符串，点号（.），或者&quot; &quot;。</p><p>&quot;system&quot; 作为系统保留字符串不能作为数据库名。</p><p>数据库名不能包含 &quot;$&quot;。</p><h2 id="文档"><a href="#文档" aria-hidden="true" class="header-anchor">#</a><strong>文档</strong></h2><p>文档是mongodb中的最核心的概念，是其核心单元，我们可以将文档类比成关系型数据库中的每一行数据。</p><p>多个键及其关联的值有序的放置在一起就是文档。在mongodb中使用一种类json的bson存储数据。</p><p>bson数据可以理解为在json的基础上添加了一些json中没有的数据类型。</p><p>如果我们会json，那么bson我们就已经掌握了一半了，至于新添加的数据类型后面我会介绍。</p><p>文档例子如下：</p><pre class="language-text"><code>{ site : &quot;91jinrong.com&quot; }
</code></pre><p>通常，&quot;object（对象）&quot; 术语是指一个文件。</p><p>文件类似于一个RDBMS的记录。</p><p>我们可以对集合（collection）进行插入，更新和删除操作。</p><p>下表将帮助您更容易理解Mongo中的一些概念：</p><table><thead><tr><th style="text-align:left"><strong>RDBMSMongoDB</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">Table（表）</td><td style="text-align:left">Collection（集合）</td></tr><tr><td style="text-align:left">Column（栏）</td><td style="text-align:left">Key（键）</td></tr><tr><td style="text-align:left">Value（值）</td><td style="text-align:left">Value（值）</td></tr><tr><td style="text-align:left">Records / Rows（记录/列）</td><td style="text-align:left">Document / Object（文档/对象）</td></tr></tbody></table><p>下表为MongoDB中常用的几种数据类型。</p><table><thead><tr><th style="text-align:left"><strong>数据类型描述</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">string（字符串）</td><td style="text-align:left">可以是一个空字符串或者字符组合。</td></tr><tr><td style="text-align:left">integer（整型）</td><td style="text-align:left">整数。</td></tr><tr><td style="text-align:left">boolean（布尔型）</td><td style="text-align:left">逻辑值 True 或者 False。</td></tr><tr><td style="text-align:left">double</td><td style="text-align:left">双精度浮点型</td></tr><tr><td style="text-align:left">null</td><td style="text-align:left">不是0，也不是空。</td></tr><tr><td style="text-align:left">array</td><td style="text-align:left">数组：一系列值</td></tr><tr><td style="text-align:left">object</td><td style="text-align:left">对象型，程序中被使用的实体。可以是一个值，变量，函数，或者数据结构。</td></tr><tr><td style="text-align:left">timestamp</td><td style="text-align:left">timestamp存储为64为的值，只运行一个mongod时可以确保是唯一的。前32位保存的是UTC时间，单位是秒，后32为是在这一秒内的计数值，从0开始，每新建一个MongoTimestamp对象就加一。</td></tr><tr><td style="text-align:left">Internationalized Strings</td><td style="text-align:left">UTF-8 字符串。</td></tr><tr><td style="text-align:left">Object IDs</td><td style="text-align:left">在mongodb中的文档需要使用唯一的关键字_id来标识他们。几乎每一个mongodb文档都使用_id字段作为第一个属性（在系统集合和定容量集合（capped collection）中有一些例外）。_id值可以是任何类型，最常见的做法是使用ObjectId类型。</td></tr></tbody></table><h2 id="集合"><a href="#集合" aria-hidden="true" class="header-anchor">#</a><strong>集合</strong></h2><p>集合就是一组文档的组合。如果将文档类比成数据库中的行，那么集合就可以类比成数据库的表。</p><p>在mongodb中的集合是无模式的，也就是说集合中存储的文档的结构可以是不同的，比如下面的两个文档可以同时存入到一个集合中：</p><pre class="language-text"><code>{&quot;name&quot;:&quot;mengxiangyue&quot;} {&quot;Name&quot;:&quot;mengxiangyue&quot;,&quot;sex&quot;:&quot;nan&quot;}

</code></pre><p>当第一个文档插入时，集合就会被创建。</p><h2 id="合法的集合名"><a href="#合法的集合名" aria-hidden="true" class="header-anchor">#</a><strong>合法的集合名</strong></h2><p>集合名称必须以字母或下划线开头。</p><p>集合名可以保护数字</p><p>集合名称不能使美元符&quot;$&quot;，&quot;$&quot;是系统保留字符。</p><p>集合的名字 最大不能超过128个字符 。</p><p>另外，&quot;.&quot;号的使用在集合当中是允许的，它们被成为子集合(Subcollection)；比如你有一个blog集合，你可以使用blog.title，blog.content或者blog.author来帮组你更好地组织集合。</p><p>如下实例：</p><pre class="language-text"><code>db.tutorials.php.findOne()

</code></pre><h2 id="元数据"><a href="#元数据" aria-hidden="true" class="header-anchor">#</a><strong>元数据</strong></h2><p>数据库的信息是存储在集合中。它们使用了系统的命名空间：</p><pre class="language-text"><code>dbname.system.*

</code></pre><p>在MongoDB数据库中名字空间 &lt;dbname&gt;.system.* 是包含多种系统信息的特殊集合(Collection)，如下:</p><table><thead><tr><th style="text-align:left"><strong>集合命名空间描述</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">dbname.system.namespaces</td><td style="text-align:left">列出所有名字空间。</td></tr><tr><td style="text-align:left">dbname.system.indexes</td><td style="text-align:left">列出所有索引。</td></tr><tr><td style="text-align:left">dbname.system.profile</td><td style="text-align:left">包含数据库概要(profile)信息。</td></tr><tr><td style="text-align:left">dbname.system.users</td><td style="text-align:left">列出所有可访问数据库的用户。</td></tr><tr><td style="text-align:left">dbname.local.sources</td><td style="text-align:left">包含复制对端（slave）的服务器信息和状态。</td></tr></tbody></table><p>对于修改系统集合中的对象有如下限制。</p><p>在插入数据，可以创建索引。但除此之外该表信息是不可变的(特殊的drop index命令将自动更新相关信息)。</p><p>是可修改的。 是可删除的。</p></div><!----><!----></div></div></div>
    <script src="/assets/js/4.627e96b5.js" defer></script><script src="/assets/js/app.30461cdf.js" defer></script>
  </body>
</html>
