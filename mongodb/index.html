<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浮生六记 | **NoSQL 简介**</title>
    <meta name="description" content="Just playing around">
    <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/24.styles.fe2c85d3.css" as="style"><link rel="preload" href="/assets/js/app.30461cdf.js" as="script"><link rel="preload" href="/assets/js/9.8fae06a8.js" as="script"><link rel="prefetch" href="/assets/js/12.cc1b21fd.js"><link rel="prefetch" href="/assets/js/0.01165e77.js"><link rel="prefetch" href="/assets/js/1.ab7ff7e4.js"><link rel="prefetch" href="/assets/js/2.2e9a2c6e.js"><link rel="prefetch" href="/assets/js/3.868041e5.js"><link rel="prefetch" href="/assets/js/4.627e96b5.js"><link rel="prefetch" href="/assets/js/5.ac7555dd.js"><link rel="prefetch" href="/assets/js/6.831fe20d.js"><link rel="prefetch" href="/assets/js/7.2958aa67.js"><link rel="prefetch" href="/assets/js/8.40d7211d.js"><link rel="prefetch" href="/assets/js/10.fc82ce8a.js"><link rel="prefetch" href="/assets/js/11.0dfe841b.js"><link rel="prefetch" href="/assets/js/13.26d3ea56.js"><link rel="prefetch" href="/assets/js/14.aabf7231.js"><link rel="prefetch" href="/assets/js/15.fc6c5f4e.js"><link rel="prefetch" href="/assets/js/16.095a5454.js"><link rel="prefetch" href="/assets/js/17.e814a0d2.js"><link rel="prefetch" href="/assets/js/18.d7e49a94.js"><link rel="prefetch" href="/assets/js/19.2d14bc1b.js"><link rel="prefetch" href="/assets/js/20.45dfe896.js"><link rel="prefetch" href="/assets/js/21.397de84d.js"><link rel="prefetch" href="/assets/js/22.2690f6c3.js"><link rel="prefetch" href="/assets/js/23.2a168d4d.js">
    <link rel="stylesheet" href="/assets/css/24.styles.fe2c85d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      浮生六记
    </span></a><div class="links"><!----><nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/markdown.html" class="nav-link">markdown</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link">External</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/markdown.html" class="nav-link">markdown</a></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link">External</a></div><!----></nav><!----></div><div class="page"><div class="content"><h1 id="nosql-简介"><a href="#nosql-简介" aria-hidden="true" class="header-anchor">#</a><strong>NoSQL 简介</strong></h1><p>NoSQL(NoSQL = Not Only SQL )，意即&quot;不仅仅是SQL&quot;。</p><p>在现代的计算系统上每天网络上都会产生庞大的数据量。</p><p>这些数据有很大一部分是由关系数据库管理系统（RDMBSs）来处理，这使得数据建模和应用程序编程更加简单。</p><p>通过应用实践证明，关系模型是非常适合于客户服务器编程，今天它是结构化数据存储在网络和商务应用的主导技术。</p><p>NoSQL 是一项全新的数据库革命性运动，早期就有人提出，发展至2009年趋势越发高涨。NoSQL的拥护者们提倡运用非关系型的数据存储，相对于铺天盖地的关系型数据库运用，这一概念无疑是一种全新的思维的注入，目前市面是流行的有：<strong>CouchDB，Hbase，cassandra，redis等。</strong></p><h2 id="关系型数据库遵循acid规则"><a href="#关系型数据库遵循acid规则" aria-hidden="true" class="header-anchor">#</a><strong>关系型数据库遵循ACID规则</strong></h2><p>事务在英文中是transaction，和现实世界中的交易很类似，它有如下四个特性：</p><p><strong>1、A (Atomicity) 原子性</strong>原子性很容易理解，也就是说事务里的所有操作要么全部做完，要么都不做，事务成功的条件是事务里的所有操作都成功，只要有一个操作失败，整个事务就失败，需要回滚。</p><p>比如银行转账，从A账户转100元至B账户，分为两个步骤：1）从A账户取100元；2）存入100元至B账户。这两步要么一起完成，要么一起不完成，如果只完成第一步，第二步失败，钱会莫名其妙少了100元。</p><p><strong>2、C (Consistency) 一致性</strong>一致性也比较容易理解，也就是说数据库要一直处于一致的状态，事务的运行不会改变数据库原本的一致性约束。</p><p>例如现有完整性约束a+b=10，如果一个事务改变了a，那么必须得改变b，使得事务结束后依然满足a+b=10，否则事务失败。</p><p><strong>3、I (Isolation) 独立性</strong>所谓的独立性是指并发的事务之间不会互相影响，如果一个事务要访问的数据正在被另外一个事务修改，只要另外一个事务未提交，它所访问的数据就不受未提交事务的影响。比如现有有个交易是从A账户转100元至B账户，在这个交易还未完成的情况下，如果此时B查询自己的账户，是看不到新增加的100元的。</p><p><strong>4、D (Durability) 持久性</strong>持久性是指一旦事务提交后，它所做的修改将会永久的保存在数据库上，即使出现宕机也不会丢失。</p><h2 id="为什么使用nosql"><a href="#为什么使用nosql" aria-hidden="true" class="header-anchor">#</a><strong>为什么使用NoSQL ?</strong></h2><p>今天我们可以通过第三方平台（如：Google,Facebook等）可以很容易的访问和抓取数据。用户的个人信息，社交网络，地理位置，用户生成的数据和用户操作日志已经成倍的增加。我们如果要对这些用户数据进行挖掘，那SQL数据库已经不适合这些应用了, NoSQL数据库的发展也却能很好的处理这些大的数据。</p><h2 id="实例"><a href="#实例" aria-hidden="true" class="header-anchor">#</a><strong>实例</strong></h2><p>社会化关系网:</p><pre class="language-text"><code>Each record: UserID1, UserID2  
Separate records: UserID, first_name,last_name, age, gender,...  
Task: Find all friends of friends of friends of ... friends of a given user.

</code></pre><p>Wikipedia 页面 :</p><pre class="language-text"><code>Large collection of documents  
Combination of structured and unstructured data  
Task: Retrieve all pages regarding athletics of Summer Olympic before 1950.

</code></pre><h2 id="rdbms-vs-nosql"><a href="#rdbms-vs-nosql" aria-hidden="true" class="header-anchor">#</a><strong>RDBMS vs NoSQL</strong></h2><p><strong>RDBMS</strong></p><ul><li>高度组织化结构化数据</li><li>结构化查询语言（SQL） (SQL)</li><li>数据和关系都存储在单独的表中。</li><li>数据操纵语言，数据定义语言</li><li>严格的一致性</li><li>基础事务</li></ul><p><strong>NoSQL</strong></p><ul><li>代表着不仅仅是SQL</li><li>没有声明性查询语言</li><li>没有预定义的模式-键 - 值对存储，列存储，文档存储，图形数据库</li><li>最终一致性，而非ACID属性</li><li>非结构化和不可预知的数据</li><li>CAP定理</li><li>高性能，高可用性和可伸缩性</li></ul><h2 id="nosql-强调"><a href="#nosql-强调" aria-hidden="true" class="header-anchor">#</a><strong>NoSQL 强调</strong></h2><p>Key-Value Stores和文档数据库的优点，而不是单纯的反对RDBMS。</p><h2 id="cap定理（cap-theorem）"><a href="#cap定理（cap-theorem）" aria-hidden="true" class="header-anchor">#</a><strong>CAP定理（CAP theorem）</strong></h2><p>在计算机科学中, CAP定理（CAP theorem）, 又被称作 布鲁尔定理（Brewer's theorem）, 它指出对于一个分布式计算系统来说，不可能同时满足以下三点:</p><ul><li><strong>一致性(Consistency)</strong> (所有节点在同一时间具有相同的数据)</li><li><strong>可用性(Availability)</strong> (保证每个请求不管成功或者失败都有响应)</li><li><strong>分隔容忍(Partition tolerance)</strong> (系统中任意信息的丢失或失败不会影响系统的继续运作)</li></ul><p>CAP理论的核心是：一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求，最多只能同时较好的满足两个。</p><p>因此，根据 CAP 原理将 NoSQL 数据库分成了满足 CA 原则、满足 CP 原则和满足 AP 原则三 大类：</p><ul><li>CA - 单点集群，满足一致性，可用性的系统，通常在可扩展性上不太强大。</li><li>CP - 满足一致性，分区容忍必的系统，通常性能不是特别高。</li><li>AP - 满足可用性，分区容忍性的系统，通常可能对一致性要求低一些。</li></ul><h2 id="nosql的优点-缺点"><a href="#nosql的优点-缺点" aria-hidden="true" class="header-anchor">#</a><strong>NoSQL的优点/缺点</strong></h2><p>优点:</p><ul><li><ul><li>高可扩展性</li></ul></li><li><ul><li>分布式计算</li></ul></li><li><ul><li>低成本</li></ul></li><li><ul><li>架构的灵活性，半结构化数据</li></ul></li><li><ul><li>没有复杂的关系</li></ul></li></ul><p>缺点:</p><ul><li><ul><li>没有标准化</li></ul></li><li><ul><li>有限的查询功能（到目前为止）</li></ul></li><li><ul><li>事务</li></ul></li></ul><h2 id="base"><a href="#base" aria-hidden="true" class="header-anchor">#</a><strong>BASE</strong></h2><p>BASE：Basically Available, Soft-state, Eventually Consistent。 由 Eric Brewer 定义。</p><p>CAP理论的核心是：一个分布式系统不可能同时很好的满足一致性，可用性和分区容错性这三个需求，最多只能同时较好的满足两个。</p><p>BASE是NoSQL数据库通常对可用性及一致性的弱要求原则:</p><ul><li>Basically Availble --基本可用</li><li>Soft-state --软状态/柔性事务。 &quot;Soft state&quot; 可以理解为&quot;无连接&quot;的, 而 &quot;Hard state&quot; 是&quot;面向连接&quot;的</li><li>Eventual Consistency --最终一致性 最终一致性， 也是是 ACID 的最终目的。</li></ul><h2 id="acid-vs-base"><a href="#acid-vs-base" aria-hidden="true" class="header-anchor">#</a><strong>ACID vs BASE</strong></h2><table><thead><tr><th style="text-align:left"><strong>ACIDBASE</strong></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">原子性(<strong>A</strong>tomicity)</td><td style="text-align:left">基本可用(<strong>B</strong>asically <strong>A</strong>vailable)</td></tr><tr><td style="text-align:left">一致性(<strong>C</strong>onsistency)</td><td style="text-align:left">软状态/柔性事务(<strong>S</strong>oft state)</td></tr><tr><td style="text-align:left">隔离性(<strong>I</strong>solation)</td><td style="text-align:left">最终一致性 (<strong>E</strong>ventual consistency)</td></tr><tr><td style="text-align:left">持久性 (<strong>D</strong>urable)</td><td style="text-align:left"></td></tr></tbody></table><p>mark :  一篇比较好的柔性事务贴: http://www.zhihu.com/question/31813039/answer/53437637</p><h2 id="nosql-数据库分类"><a href="#nosql-数据库分类" aria-hidden="true" class="header-anchor">#</a><strong>NoSQL 数据库分类</strong></h2><table><thead><tr><th style="text-align:left"><strong>类型部分代表特点</strong></th><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">列存储</td><td style="text-align:left">Hbase Cassandra Hypertable</td><td style="text-align:left">顾名思义，是按列存储数据的。最大的特点是方便存储结构化和半结构化数据，方便做数据压缩，对针对某一列或者某几列的查询有非常大的IO优势。</td></tr><tr><td style="text-align:left">文档存储</td><td style="text-align:left"><a href="https://wizardforcel.gitbooks.io/w3school-mongodb/content/www.yiibai.com/mongodb" target="_blank" rel="noopener noreferrer">MongoDB</a> CouchDB</td><td style="text-align:left">文档存储一般用类似json的格式存储，存储的内容是文档型的。这样也就有有机会对某些字段建立索引，实现关系数据库的某些功能。</td></tr><tr><td style="text-align:left">key-value存储</td><td style="text-align:left">Tokyo Cabinet / Tyrant Berkeley DB MemcacheDB Redis</td><td style="text-align:left">可以通过key快速查询到其value。一般来说，存储不管value的格式，照单全收。（Redis包含了其他功能）</td></tr><tr><td style="text-align:left">图存储</td><td style="text-align:left">Neo4J FlockDB</td><td style="text-align:left">图形关系的最佳存储。使用传统关系数据库来解决的话性能低下，而且设计使用不方便。</td></tr><tr><td style="text-align:left">对象存储</td><td style="text-align:left">db4o Versant</td><td style="text-align:left">通过类似面向对象语言的语法操作数据库，通过对象的方式存取数据。</td></tr><tr><td style="text-align:left">xml数据库</td><td style="text-align:left">Berkeley DB XML BaseX</td><td style="text-align:left">高效的存储XML数据，并支持XML的内部查询语法，比如XQuery,Xpath。</td></tr></tbody></table><h1 id><a href="#" aria-hidden="true" class="header-anchor">#</a></h1></div><!----><!----></div></div></div>
    <script src="/assets/js/9.8fae06a8.js" defer></script><script src="/assets/js/app.30461cdf.js" defer></script>
  </body>
</html>
