(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{55:function(e,t,n){"use strict";n.r(t);var r=n(0),a=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[n("h4",{attrs:{id:"花了一些时间搭了个基于node-js的服务器环境，当中踩了许多坑，记录下大致的流程与大家分享"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#花了一些时间搭了个基于node-js的服务器环境，当中踩了许多坑，记录下大致的流程与大家分享","aria-hidden":"true"}},[e._v("#")]),e._v(" 花了一些时间搭了个基于Node.js的服务器环境，当中踩了许多坑，记录下大致的流程与大家分享")]),n("h3",{attrs:{id:"域名和服务器的购买、解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#域名和服务器的购买、解析","aria-hidden":"true"}},[e._v("#")]),e._v(" 域名和服务器的购买、解析")]),n("ul",[n("li",[e._v("域名的购买：\n"),n("ul",[n("li",[e._v("国内有阿里云、腾讯云等等,国外有 GoDaddy(支持支付宝)，这些都能满足要求。")])])]),n("li",[e._v("服务器的租用：\n"),n("ul",[n("li",[e._v("由于国内的服务器需要备案，为了省时省力，我选择去 taobao 租用香港的云服务器，满足基础就好，等以后需求更大再选择扩大服务器也不迟。")]),n("li",[e._v("服务器有许多种选择，有基于 "),n("code",[e._v("windows")]),e._v(" 的，也有基于 "),n("code",[e._v("linux")]),e._v(" 的，根据要跑的东西来选择相应的服务器，这里我选择 "),n("code",[e._v("linux Centos_6.4")]),e._v("版本，下面的操作也是基于此版本。\n"),n("p",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:"http://i1.piimg.com/567571/8672fceae05806b8.png",width:"250",alt:"图片名称",align:"center"}})])]),n("li",[e._v("租完服务器你会得到一个服务器IP（xxx xx xx xx），还有服务器的账号密码，记得保存好。")])])]),n("li",[e._v("域名解析：\n"),n("ul",[n("li",[e._v("在购买域名的网站解析你的域名，把IP地址填入相关的栏目，此时你的域名和服务器就已经关联了，你可以 "),n("code",[e._v("ping")]),e._v(" 一下你的域名看看是否生效。")])])])]),n("h3",{attrs:{id:"远程连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#远程连接","aria-hidden":"true"}},[e._v("#")]),e._v(" 远程连接")]),n("ul",[n("li",[e._v("下载 "),n("code",[e._v("PuTTY")]),e._v(" 和 "),n("code",[e._v("WinSCP")]),n("ul",[n("li",[n("code",[e._v("PuTTY")]),e._v(" 是在 "),n("code",[e._v("windows")]),e._v(" 平台上远程连接（"),n("code",[e._v("ssh")]),e._v("） "),n("code",[e._v("linux")]),e._v(" 的一个工具，使用此工具连接服务器IP，输入帐号和密码，登录成功！\n"),n("a",{attrs:{href:"http://www.putty.ws/putty002",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用方法在这里")]),e._v("，"),n("a",{attrs:{href:"http://jingyan.baidu.com/article/d5c4b52b386e37da560dc5eb.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("实在不明白可以看这里")]),e._v("。")]),n("li",[n("code",[e._v("WinSCP")]),e._v(" 可以用来传输本地文件到远程服务器，也可以进行查看、修改等操作，把它理解成半个图形操作界面就OK。")])])])]),n("h3",{attrs:{id:"搭建-node-js-环境"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#搭建-node-js-环境","aria-hidden":"true"}},[e._v("#")]),e._v(" 搭建 "),n("code",[e._v("Node.js")]),e._v(" 环境")]),n("ul",[n("li",[e._v("下载安装包：")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("wget https://nodejs.org/dist/v4.6.0/node-v4.6.0.tar.gz\n")])]),n("ul",[n("li",[e._v("解压：")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("tar -xzvf node-v4.6.0.tar.gz\n")])]),n("ul",[n("li",[e._v("预编译：")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("cd node-v4.6.0\n./configure\n")])]),n("p",[e._v("你会遇到如下错误:")]),n("blockquote",[n("p",[e._v("WARNING: failed to autodetect C++ compiler version (CXX=g++)")])]),n("blockquote",[n("p",[e._v("WARNING: failed to autodetect C compiler version (CC=gcc)")])]),n("blockquote",[n("p",[e._v("Node.js configure error: No acceptable C compiler found!")])]),n("p",[e._v("此时你需要安装 "),n("code",[e._v("c++")]),e._v(" 编译器：")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("yum groupinstall 'Development Tools'\n./configure\n")])]),n("blockquote",[n("p",[e._v("WARNING: C++ compiler too old, need g++ 4.8 or clang++ 3.4 (CXX=g++)")])]),n("p",[e._v("提示你版本过旧需要升级，此时你需要一步一步执行以下命令：")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("curl http://linuxsoft.cern.ch/cern/scl/slc6-scl.repo > /etc/yum.repos.d/slc6-scl.repo\nrpm --import http://ftp.mirrorservice.org/sites/ftp.scientificlinux.org/linux/scientific/51/i386/RPM-GPG-KEYs/RPM-GPG-KEY-cern\nyum install -y devtoolset-3\nscl enable devtoolset-3 bash\n./configure\nmake && make install\n")])]),n("blockquote",[n("p",[n("code",[e._v("./configure")]),e._v(" 是用来检测你的安装平台的目标特征的。比如它会检测你是不是有 "),n("code",[e._v("CC")]),e._v("或 "),n("code",[e._v("GCC")]),e._v("，并不是需要 "),n("code",[e._v("CC")]),e._v(" 或 "),n("code",[e._v("GCC")]),e._v(" ，它是个 "),n("code",[e._v("shell")]),e._v(" 脚本。\n"),n("code",[e._v("configure")]),e._v(" 根据平台和配置自动生成 "),n("code",[e._v("makefile")]),e._v("。")])]),n("blockquote",[n("p",[n("code",[e._v("make")]),e._v(" 是用来编译的，它从 "),n("code",[e._v("Makefile")]),e._v(" 中读取指令，然后编译。")])]),n("blockquote",[n("p",[n("code",[e._v("make install")]),e._v(" 是用来安装的，它也从 "),n("code",[e._v("Makefile")]),e._v(" 中读取指令，安装到指定的位置。")])]),n("p",[e._v("这个编译过程我等了三个多小时，祝你好运吧。\n完成命令后测试一下:")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("node -v\n")])]),n("blockquote",[n("p",[e._v("v4.6.0")])]),n("p",[e._v("成功！此时你可以在这台主机上运行"),n("code",[e._v("Nodejs")]),e._v("环境了。")]),n("h3",{attrs:{id:"安装-nginx"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#安装-nginx","aria-hidden":"true"}},[e._v("#")]),e._v(" 安装 "),n("code",[e._v("nginx")])]),n("h4",{attrs:{id:"nginx-engine-x-是一个高性能的http和反向代理服务器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#nginx-engine-x-是一个高性能的http和反向代理服务器","aria-hidden":"true"}},[e._v("#")]),n("code",[e._v("Nginx")]),e._v(" ("),n("code",[e._v("engine x")]),e._v(") 是一个高性能的HTTP和反向代理服务器")]),n("p",{staticStyle:{"text-align":"center"}},[n("img",{attrs:{src:"https://pic1.zhimg.com/480c1c45d2565e2f92fd930d25b73a18_b.jpg",width:"500",alt:"图片名称",align:"center"}})]),e._v("转自 [阿笠博士](https://www.zhihu.com/people/sun-guan-jun-92)\n"),n("ul",[n("li",[e._v("在nginx官方网站下载一个rpm包，下载地址是")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("wget http://nginx.org/packages/centos/6/noarch/RPMS/nginx-release-centos-6-0.el6.ngx.noarch.rpm\n")])]),n("ul",[n("li",[e._v("安装这个rpm包")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rpm -ivh nginx-release-centos-6-0.el6.ngx.noarch.rpm\n")])]),n("ul",[n("li",[e._v("安装过程中会出现错误提示：")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("warning: nginx-release-centos-6-0.el6.ngx.noarch.rpm: Header V4 RSA/SHA1 Signature, key ID 7bd9bf62: NOKEY\n")])]),n("p",[e._v("忽略即可")]),n("ul",[n("li",[e._v("安装nginx:")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("yum install nginx\n")])]),n("ul",[n("li",[e._v("成功以后，输入:")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("whereis nginx\n")])]),n("blockquote",[n("p",[e._v("nginx: /usr/sbin/nginx /etc/nginx /usr/share/nginx")])]),n("p",[e._v("可以进这几个文件看看里面的结构")]),n("ul",[n("li",[e._v("启动")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("/usr/sbin/nginx\n")])]),n("ul",[n("li",[e._v("打开防火墙端口")])]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("iptables -I INPUT -p tcp --dport 80 -j ACCEPT\n")])]),n("p",[e._v("打开你的浏览器访问一下你的服务器IP，如果出现 "),n("code",[e._v("nginx")]),e._v(" 字样表示设置成功。")]),n("p",[e._v("成功以后，开始配置 "),n("code",[e._v("nginx")]),e._v("，"),n("a",{attrs:{href:"http://www.nginx.cn/591.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("具体看这篇文章")]),e._v("。")]),n("p",[e._v("我这里说点简单的，找到：")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("include /etc/nginx/conf.d/*.conf;\n")])]),n("p",[e._v("注释掉这句话（在 "),n("code",[e._v("include")]),e._v(" 前加上 "),n("code",[e._v("#")]),e._v("），\n然后在下一行加上如下语句：")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("server {\n    listen       80; //监听的端口\n\n    server_name  www.xxx.com xxx.com; //你自己的域名\n\n    access_log  /var/log/nginx/log/main.host.access.log  main; //日志记录\n\n    location / {  \n        //`location` 下的 `proxy_pass` 表示跳转的端口，比如你的服务起在8088端口，\n        //`nginx`就可以监听80并跳转到8088，你的服务就可以运行在公网上了。\n        \n        proxy_set_header   X-Real-IP $remote_addr;\n        proxy_set_header   Host      $http_host;\n        proxy_set_header   X-NginX-Proxy true;\n        proxy_pass   http://127.0.0.1:8088; //跳转端口，你的node服务器设置端口为8088\n    }\n}\n")])]),n("p",[e._v("全部设置好以后重启 "),n("code",[e._v("nginx")]),e._v("：")]),n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("/usr/sbin/nginx -s reload\n")])]),n("p",[e._v("运行你的服务如在8088端口，然后在公网访问你的域名，\n大功告成！")])])}],!1,null,null,null);t.default=a.exports}}]);