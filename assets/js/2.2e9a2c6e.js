(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{68:function(e,t,a){"use strict";a.r(t);var r=a(0),s=Object(r.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"mongodb使用update-函数更新数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mongodb使用update-函数更新数据","aria-hidden":"true"}},[e._v("#")]),a("strong",[e._v("MongoDB使用update()函数更新数据")])]),a("h2",{attrs:{id:"描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#描述","aria-hidden":"true"}},[e._v("#")]),a("strong",[e._v("描述")])]),a("p",[e._v("MongoDB数据更新可以使用update()函数。")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("db.collection.update( criteria, objNew, upsert, multi )\n\n")])]),a("p",[e._v("update()函数接受以下四个参数：")]),a("ul",[a("li",[a("strong",[e._v("criteria")]),e._v(" : update的查询条件，类似sql update查询内where后面的。")]),a("li",[a("strong",[e._v("objNew")]),e._v(" : update的对象和一些更新的操作符（如$,$inc...）等，也可以理解为sql update查询内set后面的")]),a("li",[a("strong",[e._v("upsert")]),e._v(" : 这个参数的意思是，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。")]),a("li",[a("strong",[e._v("multi")]),e._v(" : mongodb默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。")])]),a("p",[a("strong",[e._v("update() 命令")])]),a("p",[e._v('如果我们想将"userinfo"集合中"userId"为"1"的"name"字段修改为"91JINRONG"，那么我们可以使用update()命令来实现（如下实例所示）。 db.idStock.update({\'_id’:\'Asking\'},{$set:{\'value\':NumberLong(100003)}})')]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('> db.userinfo.update({\'userId\':"1"},{$set:{"name":"91jinrong"}})\n')])]),a("p",[e._v("如果upsert设置为true , 并且没有找到更新条件的数据，mongodb会插入新的纪录:")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('> db.userinfo.update({\'userId\':101},{$set:{"name":"SUNLONGLONG"}},true,false)\n')])]),a("p",[e._v("以下实例将更新第一条匹配条件的数据：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('> db.userinfo.update({\'userId\':{$gt:95}},{$set:{"name":"SUNLONGLONG123"}},true,false)\n')])]),a("p",[e._v("以下实例将更新全部匹配条件的数据：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('> db.userinfo.update({\'userId\':{$gt:95}},{$set:{"name":"SUNLONGLONG123"}},true,true)\n')])]),a("h2",{attrs:{id:"查看集合中更新后的数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看集合中更新后的数据","aria-hidden":"true"}},[e._v("#")]),a("strong",[e._v("查看集合中更新后的数据")])]),a("p",[e._v("我们可以使用以下命令查看数据是否更新：")]),a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("> db.userinfo.find();\n\n")])]),a("h2",{attrs:{id:""}},[a("a",{staticClass:"header-anchor",attrs:{href:"#","aria-hidden":"true"}},[e._v("#")])])])}],!1,null,null,null);t.default=s.exports}}]);